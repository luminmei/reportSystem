<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../assets/css/layui.css">
    <link rel="stylesheet" href="../assets/css/view.css"/>
    <link rel="icon" href="/favicon.ico">
    <title>订单</title>
</head>
<body class="layui-view-body">
    <div class="layui-content">
        <div class="layui-page-header">
            <div class="pagewrap">
                <span class="layui-breadcrumb">
                  <a href="">表格</a>
                  <a><cite>图书信息表</cite></a>
                </span>
            </div>
        </div>
        <div class="layui-row">
            <div class="layui-card">
                <div class="layui-card-body">
                    <div class="form-box">
                        <div class="layui-form layui-form-item">
                        <table id="bookTable"></table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../assets/layui.all.js"></script>
    <script src="../../assets/js/ajax.js"></script>
    <script>
      var element = layui.element;
      var table = layui.table;
      var form = layui.form;
      window.onload = function () {
        showList()
      }
      function showList (data) {     
        //展示已知数据
        table.render({
          elem: '#bookTable',
          cols: [[ //标题栏
            {type:'numbers',title:'索引',width: 50},
            {field: 'bookTypeName', title:'图书类型',width: 100},
            {field: 'bookName', title: '图书名称', width: 150},
            {field: 'bookPress', title: '图书出版社', width: 150},
            {field: 'bookPubDate', title: '出版日期', width: 150, sort: true},
            {field: 'bookAuther', title: '作者', width: 150},
            {field: 'bookMprice', title: '价格', width: 80, sort: true}
          ]],
          request: {
           pageName: 'page', //页码的参数名称，默认：page
           limitName: 'pageSize' //每页数据量的参数名，默认：limit
          },
          page: { //分页设定
            layout: ['count', 'prev', 'page', 'next'], //自定义分页布局
            limits:[5,10,15],
            curr: 1, //设定初始在第 1 页
            groups: 5, //只显示 5 个连续页码
          },
          even: true,
          parseData: function(res){ //res 即为原始返回的数据
            res.data.map(val => {
              var temp = val
              temp.bookMprice = temp.bookMprice.toFixed(2)
              return res.data
            })
            return {
              "code": 0, //解析接口状态
              "msg": res.mag, //解析提示文本
              "count": 20, //解析数据长度
              "data": res.data //解析数据列表
            };
          },
          url: '/queryBookInfoByPage',
          page: true
        })
      }
    </script>
</body>
</html>